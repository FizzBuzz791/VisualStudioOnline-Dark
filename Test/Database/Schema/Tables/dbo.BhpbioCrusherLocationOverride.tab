/****** Object:  Table [dbo].[BhpbioCrusherLocationOverride]    ******/

IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK1_CRUSHER_LOCATION_OVERRIDE]') AND parent_object_id = OBJECT_ID(N'[dbo].[BhpbioCrusherLocationOverride]'))
ALTER TABLE [dbo].[BhpbioCrusherLocationOverride] DROP CONSTRAINT [FK1_CRUSHER_LOCATION_OVERRIDE]
GO

IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK2_CRUSHER_LOCATION_OVERRIDE]') AND parent_object_id = OBJECT_ID(N'[dbo].[BhpbioCrusherLocationOverride]'))
ALTER TABLE [dbo].[BhpbioCrusherLocationOverride] DROP CONSTRAINT [FK2_CRUSHER_LOCATION_OVERRIDE]
GO

IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK3_CRUSHER_LOCATION_OVERRIDE]') AND parent_object_id = OBJECT_ID(N'[dbo].[BhpbioCrusherLocationOverride]'))
ALTER TABLE [dbo].[BhpbioCrusherLocationOverride] DROP CONSTRAINT [FK3_CRUSHER_LOCATION_OVERRIDE]
GO


IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[BhpbioCrusherLocationOverride]') AND type in (N'U'))
DROP TABLE [dbo].[BhpbioCrusherLocationOverride]
GO

CREATE TABLE [dbo].[BhpbioCrusherLocationOverride](
	[Crusher_Location_Override_Id]		INT IDENTITY(1,1) NOT NULL,
	[Crusher_Id]						VARCHAR(31) NOT NULL,
	[Location_Type_Id]					TINYINT NOT NULL,
	[Location_Id]						INT NOT NULL,
	[FromMonth]							DATETIME NOT NULL,
	[ToMonth]							DATETIME NULL,
 CONSTRAINT [PK_Crusher_LOCATION_OVERRIDE_ID] PRIMARY KEY CLUSTERED 
(
	[Crusher_Location_Override_Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[BhpbioCrusherLocationOverride]  WITH CHECK ADD  CONSTRAINT [FK1_CRUSHER_LOCATION_OVERRIDE] FOREIGN KEY([Crusher_Id])
REFERENCES [dbo].[Crusher] ([Crusher_Id])
GO

ALTER TABLE [dbo].[BhpbioCrusherLocationOverride] CHECK CONSTRAINT [FK1_CRUSHER_LOCATION_OVERRIDE]
GO

ALTER TABLE [dbo].[BhpbioCrusherLocationOverride]  WITH CHECK ADD  CONSTRAINT [FK2_CRUSHER_LOCATION_OVERRIDE] FOREIGN KEY([Location_Id])
REFERENCES [dbo].[Location] ([Location_Id])
GO

ALTER TABLE [dbo].[BhpbioCrusherLocationOverride] CHECK CONSTRAINT [FK2_CRUSHER_LOCATION_OVERRIDE]
GO

ALTER TABLE [dbo].[BhpbioCrusherLocationOverride]  WITH CHECK ADD  CONSTRAINT [FK3_CRUSHER_LOCATION_OVERRIDE] FOREIGN KEY([Location_Type_Id])
REFERENCES [dbo].[LocationType] ([Location_Type_Id])
GO

ALTER TABLE [dbo].[BhpbioCrusherLocationOverride] CHECK CONSTRAINT [FK3_CRUSHER_LOCATION_OVERRIDE]
GO

